<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Spending Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #0f172a, #020617);
      color: #e5e7eb;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
    }

    .app {
      width: 100%;
      max-width: 960px;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      padding: 20px 20px 24px;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .title-group h1 {
      margin: 0;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-badge {
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(34, 197, 94, 0.15);
      color: #4ade80;
      border: 1px solid rgba(34, 197, 94, 0.6);
    }

    .title-group p {
      margin: 4px 0 0;
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .summary {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }

    .card {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 12px;
      padding: 10px 12px;
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    .card-label {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-bottom: 4px;
    }

    .card-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .card-value.expense {
      color: #f97373;
    }
    .card-value.income {
      color: #4ade80;
    }
    .card-value.net {
      color: #38bdf8;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 2fr);
      gap: 16px;
    }

    @media (max-width: 800px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .summary {
        grid-template-columns: 1fr;
      }
    }

    .section-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      margin-bottom: 8px;
    }

    form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    input, select, textarea {
      border-radius: 8px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px 9px;
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 0.9rem;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.6);
      background: rgba(15, 23, 42, 1);
    }

    .field-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    .field-row-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 9px 14px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: transform 0.1s ease, box-shadow 0.15s ease, background 0.15s ease, opacity 0.15s ease;
    }

    button.primary {
      background: linear-gradient(135deg, #38bdf8, #22c55e);
      color: #0b1120;
      box-shadow: 0 10px 20px rgba(56, 189, 248, 0.4);
      width: 100%;
    }

    button.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(56, 189, 248, 0.55);
    }

    button.secondary {
      background: rgba(15, 23, 42, 1);
      color: #9ca3af;
      border: 1px solid rgba(148, 163, 184, 0.3);
      padding-inline: 12px;
      font-size: 0.8rem;
    }

    button.secondary:hover {
      background: rgba(30, 41, 59, 1);
      color: #e5e7eb;
    }

    .actions-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 4px;
    }

    .status {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .status span {
      color: #22c55e;
      font-weight: 500;
    }

    .table-card {
      max-height: 420px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .table-container {
      margin-top: 4px;
      border-radius: 10px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      overflow: hidden;
      background: rgba(15, 23, 42, 0.9);
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }

    thead {
      background: rgba(15, 23, 42, 1);
      position: sticky;
      top: 0;
      z-index: 1;
    }

    th, td {
      padding: 7px 8px;
      text-align: left;
      border-bottom: 1px solid rgba(31, 41, 55, 1);
      white-space: nowrap;
    }

    th {
      font-size: 0.75rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    tbody {
      display: block;
      max-height: 340px;
      overflow-y: auto;
    }

    thead tr, tbody tr {
      display: table;
      width: 100%;
      table-layout: fixed;
    }

    tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.95);
    }

    .amount-cell {
      text-align: right;
      font-variant-numeric: tabular-nums;
    }

    .amount-expense {
      color: #f97373;
    }

    .amount-income {
      color: #4ade80;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.7rem;
      border: 1px solid transparent;
    }

    .badge-expense {
      background: rgba(248, 113, 113, 0.12);
      color: #fecaca;
      border-color: rgba(248, 113, 113, 0.6);
    }

    .badge-income {
      background: rgba(52, 211, 153, 0.12);
      color: #bbf7d0;
      border-color: rgba(52, 211, 153, 0.6);
    }

    .category-pill {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.12);
      color: #bfdbfe;
      border: 1px solid rgba(37, 99, 235, 0.6);
    }

    .small {
      font-size: 0.75rem;
    }

    .text-muted {
      color: #9ca3af;
    }

    .empty-state {
      text-align: center;
      padding: 20px;
      font-size: 0.85rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="title-group">
        <h1>
          ðŸ§¾ Spending Tracker
          <span class="title-badge">Offline Â· Local Only</span>
        </h1>
        <p>Just enter your expenses and theyâ€™ll be saved in this browser using local storage.</p>
      </div>
      <button class="secondary" id="clear-all-btn" title="Remove all saved data">
        ðŸ§¹ Clear all data
      </button>
    </header>

    <section class="summary">
      <div class="card">
        <div class="card-label">Total Income</div>
        <div class="card-value income" id="summary-income">â‚¹0</div>
      </div>
      <div class="card">
        <div class="card-label">Total Expense</div>
        <div class="card-value expense" id="summary-expense">â‚¹0</div>
      </div>
      <div class="card">
        <div class="card-label">Net Balance</div>
        <div class="card-value net" id="summary-balance">â‚¹0</div>
      </div>
    </section>

    <section class="layout">
      <!-- Left: Form -->
      <div>
        <div class="section-title">Add entry</div>
        <div class="card">
          <form id="entry-form">
            <div class="field-row">
              <div class="field-group">
                <label for="date">Date</label>
                <input type="date" id="date" required />
              </div>
              <div class="field-group">
                <label for="type">Type</label>
                <select id="type" required>
                  <option value="Expense">Expense</option>
                  <option value="Income">Income</option>
                </select>
              </div>
            </div>

            <div class="field-row-3">
              <div class="field-group">
                <label for="category">Category</label>
                <select id="category" required>
                  <option value="">Selectâ€¦</option>
                  <option>Food & Groceries</option>
                  <option>Transportation</option>
                  <option>Bills & Utilities</option>
                  <option>Shopping</option>
                  <option>Entertainment</option>
                  <option>Health</option>
                  <option>Education</option>
                  <option>Other</option>
                </select>
              </div>
              <div class="field-group">
                <label for="amount">Amount (â‚¹)</label>
                <input type="number" id="amount" min="0" step="0.01" required />
              </div>
              <div class="field-group">
                <label for="method">Payment method</label>
                <select id="method">
                  <option value="">Not specified</option>
                  <option>UPI</option>
                  <option>Card</option>
                  <option>Cash</option>
                  <option>Net banking</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <div class="field-group">
              <label for="description">Description (optional)</label>
              <input
                type="text"
                id="description"
                placeholder="e.g. Lunch, Ola ride, Amazon order"
              />
            </div>

            <div class="actions-row">
              <div class="status small">
                Data is stored <span>only in this browser</span>.
              </div>
              <button type="submit" class="primary">
                âž• Add entry
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Right: Table -->
      <div class="table-card">
        <div class="section-title">History</div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Category</th>
                <th>Description</th>
                <th>Method</th>
                <th style="text-align:right;">Amount</th>
              </tr>
            </thead>
            <tbody id="entries-body">
              <!-- rows injected by JS -->
            </tbody>
          </table>
          <div class="empty-state" id="empty-state">
            No entries yet. Add your first expense or income on the left.
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    const STORAGE_KEY = "spending-tracker-entries-v1";

    const form = document.getElementById("entry-form");
    const dateInput = document.getElementById("date");
    const typeInput = document.getElementById("type");
    const categoryInput = document.getElementById("category");
    const amountInput = document.getElementById("amount");
    const methodInput = document.getElementById("method");
    const descriptionInput = document.getElementById("description");
    const clearAllBtn = document.getElementById("clear-all-btn");

    const entriesBody = document.getElementById("entries-body");
    const emptyState = document.getElementById("empty-state");

    const incomeSummary = document.getElementById("summary-income");
    const expenseSummary = document.getElementById("summary-expense");
    const balanceSummary = document.getElementById("summary-balance");

    let entries = [];

    function formatCurrency(amount) {
      if (isNaN(amount)) return "â‚¹0";
      return "â‚¹" + amount.toLocaleString("en-IN", { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function loadEntries() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (!stored) {
        entries = [];
        return;
      }
      try {
        const parsed = JSON.parse(stored);
        if (Array.isArray(parsed)) {
          entries = parsed;
        } else {
          entries = [];
        }
      } catch (e) {
        console.error("Failed to parse saved entries:", e);
        entries = [];
      }
    }

    function saveEntries() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(entries));
    }

    function renderEntries() {
      entriesBody.innerHTML = "";

      if (!entries.length) {
        emptyState.style.display = "block";
      } else {
        emptyState.style.display = "none";
      }

      const sorted = [...entries].sort((a, b) => {
        if (a.date === b.date) return b.createdAt - a.createdAt;
        return a.date.localeCompare(b.date);
      });

      for (const entry of sorted) {
        const tr = document.createElement("tr");

        const tdDate = document.createElement("td");
        tdDate.textContent = entry.date || "";
        tr.appendChild(tdDate);

        const tdType = document.createElement("td");
        const typeBadge = document.createElement("span");
        typeBadge.className = "badge " + (entry.type === "Income" ? "badge-income" : "badge-expense");
        typeBadge.textContent = entry.type;
        tdType.appendChild(typeBadge);
        tr.appendChild(tdType);

        const tdCategory = document.createElement("td");
        const catSpan = document.createElement("span");
        catSpan.className = "category-pill";
        catSpan.textContent = entry.category || "â€”";
        tdCategory.appendChild(catSpan);
        tr.appendChild(tdCategory);

        const tdDesc = document.createElement("td");
        tdDesc.textContent = entry.description || "â€”";
        tr.appendChild(tdDesc);

        const tdMethod = document.createElement("td");
        tdMethod.textContent = entry.method || "â€”";
        tr.appendChild(tdMethod);

        const tdAmount = document.createElement("td");
        tdAmount.className = "amount-cell " + (entry.type === "Income" ? "amount-income" : "amount-expense");
        tdAmount.textContent = formatCurrency(entry.amount);
        tr.appendChild(tdAmount);

        entriesBody.appendChild(tr);
      }
    }

    function renderSummary() {
      let totalIncome = 0;
      let totalExpense = 0;

      for (const entry of entries) {
        if (entry.type === "Income") {
          totalIncome += entry.amount;
        } else if (entry.type === "Expense") {
          totalExpense += entry.amount;
        }
      }

      const balance = totalIncome - totalExpense;

      incomeSummary.textContent = formatCurrency(totalIncome);
      expenseSummary.textContent = formatCurrency(totalExpense);
      balanceSummary.textContent = formatCurrency(balance);
    }

    function resetForm() {
      amountInput.value = "";
      descriptionInput.value = "";
      categoryInput.value = "";
      methodInput.value = "";
      typeInput.value = "Expense";
      if (!dateInput.value) {
        dateInput.valueAsDate = new Date();
      }
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const date = dateInput.value;
      const type = typeInput.value;
      const category = categoryInput.value;
      const amount = parseFloat(amountInput.value);
      const method = methodInput.value;
      const description = descriptionInput.value.trim();

      if (!date || !type || !category || isNaN(amount) || amount <= 0) {
        alert("Please fill date, type, category and a positive amount.");
        return;
      }

      const entry = {
        id: Date.now(),
        date,
        type,
        category,
        amount,
        method,
        description,
        createdAt: Date.now()
      };

      entries.push(entry);
      saveEntries();
      renderEntries();
      renderSummary();
      resetForm();
    });

    clearAllBtn.addEventListener("click", () => {
      if (!entries.length) {
        alert("No data to clear.");
        return;
      }
      const yes = confirm("Are you sure you want to delete all saved entries? This cannot be undone.");
      if (!yes) return;

      entries = [];
      saveEntries();
      renderEntries();
      renderSummary();
    });

    (function init() {
      if (!dateInput.value) {
        dateInput.valueAsDate = new Date();
      }
      loadEntries();
      renderEntries();
      renderSummary();
    })();
  </script>
</body>

</html>
